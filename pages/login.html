<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../css/login.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-left">
        <h1 class="h1">My Eye-Catching App</h1>

      </div>
      <div class="navbar-right">
        <a href="/index.html" class="login-link">SignUp</a>
      </div>
    </nav>
    <div class="header">
      <h2>Login</h2>
    </div>
    <div class="signup-container">
      <h1>Login</h1>
      <form id="signup-form">
        <input type="email" id="login-email" placeholder="Email" required />
        <input
          type="password"
          id="login-password"
          placeholder="Password"
          required
        />
        <button type="submit" id="login-btn">Login</button>
      </form>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.2.0/firebase-app.js";
      import {
        getAuth,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/10.2.0/firebase-auth.js";

      
const firebaseConfig = {
    apiKey: "AIzaSyCyyMySnVe5aqKj7OGiQBN98xoJh-RpUas",
    authDomain: "hackathon-d7c14.firebaseapp.com",
    databaseURL: "https://hackathon-d7c14-default-rtdb.firebaseio.com/",
  
    projectId: "hackathon-d7c14",
    storageBucket: "hackathon-d7c14.appspot.com",
    messagingSenderId: "374437049596",
    appId: "1:374437049596:web:77bc0a68492c8a31129379"

  };

      const app = initializeApp(firebaseConfig);

      export const auth = getAuth(app);
      const loginForm = document.getElementById("signup-form");

      // // Add form submit event listener
      // loginForm.addEventListener("submit", (e) => {
      //   e.preventDefault(); // Prevent the default form submission

      //   var email = document.getElementById("login-email").value;
      //   var password = document.getElementById("login-password").value;

      //   signInWithEmailAndPassword(auth, email, password)
      //     .then((userCredential) => {
      //       // Signed in
      //       const user = userCredential.user;
      //       console.log("User LoggedIn:", user);
      //       alert("User LoggedIn: " + user.email);
      //       window.location.href = "./dashboard.html";
      //     })
      //     .catch((error) => {
      //       const errorCode = error.code;
      //       const errorMessage = error.message;
      //       alert(errorMessage);
      //       console.error("User loggedIn error:", errorCode, errorMessage);
      //     });
      // });

      loginForm.addEventListener("click", (e) => {
        e.preventDefault();

        const email = document.getElementById("login-email").value;
        const password = document.getElementById("login-password").value;

        const obj = {
          email: email,
          password: password,
        };

        console.log(obj);

        signInWithEmailAndPassword(auth, obj.email, obj.password)
          .then((userCredentials) => {
            alert("login sucessfully");
            window.location.href = "./dashboard.html";
          })
          .catch((error) => {
            alert(`There is an error, ${error}`);
          });
      });
    </script>
  </body>
</html>
